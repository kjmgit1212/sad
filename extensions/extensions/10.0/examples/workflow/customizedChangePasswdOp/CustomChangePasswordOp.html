<html xmlns:ns0="urn:schemas-microsoft-com:office:smarttags">

<head>
<title>Running the Workflow Application Extension API Examples</title>
<link rel=Stylesheet type="text/css" media=all href="../../examples.css">

<![endif]>
<meta http-equiv=Content-Style-Type content="text/css">
</head>

<body bgcolor=white lang=EN-US link="#0000CC" vlink="#660099" style='margin-left:
52.5pt;margin-top:24.0pt;margin-right:12.0pt;margin-bottom:24.0pt'>

<div class=Section1>

<div>

<table  border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%'>
 <tr>
  <td style='padding:0in 0in 0in 0in'>
  <p ><span style='font-family:"Arial","sans-serif";color:black'><img
  width=283 height=58 src="../../ibm_banner.gif"></span></p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p  align=right style='text-align:right'><span
  style='font-family:"Arial","sans-serif";color:black'><img width=170
  height=58 src="../../tivolilogo.gif"></span></p>
  </td>
 </tr>
</table>

<h1>Customizing Change Password Operation</h1>

<p ><span style='font-family:"Arial","sans-serif";color:black'><a
href="#Overview">Overview</a></span></p>

<p ><span style='font-family:"Arial","sans-serif";color:black'><a
href="#StepByStepInstruction">Step By Step Instructions</a></span></p>

<p ><span style='font-family:"Arial","sans-serif";color:black'><a
href="#Trigger">Trigger the Failed Notification Work Order</a></span></p>

<h2><a name=Overview></a>Overview</h2>

<p ><span style='font-family:"Arial","sans-serif";color:black'>When
a user changes the password of the account, the notification is sent out to the
account owner only upon the successful password change. This example
demonstrates how to customize the existing Change Password operation for the
Account entity type so that the account owner gets also notified upon the password
change failure.</span></p>

<h2><a name=StepByStepInstruction></a>Step by Step Instructions</h2>

<p ><span style='font-family:"Arial","sans-serif";color:black'>Under
Configure System, select Manage Operations. Choose the Entity type level radio
button and check changePassword. Click on Change.</span></p>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'>&nbsp;</span></p>

<p ><span style='font-family:"Arial","sans-serif";color:black'>&nbsp;Add
WorkOrder to the existing <b>changePassword</b> operation as shown below.</span></p>

<p ><span style='font-family:"Arial","sans-serif";color:black'>Set
the property of the WorkOrder node as below.</span></p>

<p ><span style='color:black'>&nbsp;</span></p>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'>&nbsp;</span></p>

<table  border=1 cellspacing=1 cellpadding=0
 style='border:outset black 1.0pt'>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Name</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Value</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Activity ID</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Failed_Notification</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Activity ID is the
  required property.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Participant</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>[Custom]<br>
  <br>
  return new Participant(ParticipantType.REQUESTEE);</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Select Custom from the
  dropdown box, click &#8220;&#8230;&#8221; button, and use this JavaScript so that the email can
  be sent to the account owner.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Join Type</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>OR</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Sets the node to only
  take values from a single input.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Split Type</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>OR</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Sets the node to only
  output values to a single output transition.</span></p>
  </td>
 </tr>
</table>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'><br>
From the Notification Tab, customize the subject and the message body so that
the user can be notified with the proper message. </span></p>

<table  border=1 cellspacing=1 cellpadding=0
 style='border:outset black 1.0pt'>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Name</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Value</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Use Default Template</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>False</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Unselect the check box
  so that the customized subject and the message can be used.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Subject</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Changing Password Failed
  (ProcessID.ActivityID): &lt;ID /&gt;</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>The subject of the email
  notification will show the workflow process ID and the sub activity ID
  separated by dot character. These IDs will help the system administrator to
  identify which activity is failed. </span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>For
  example, the subject of the email will be shown as below.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>Changing
  Password Failed (ProcessID.ActivityID):
  1300450832359167846.1300463090535840551</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Text Message Body</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>Changing
  the password for </span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>[&lt;JS&gt;Entity.get().getProperty(&quot;eruid&quot;)[0];&lt;/JS&gt;]
  on </span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>[&lt;JS&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>serviceDN=Entity.get().getProperty(&quot;erservice&quot;)[0];</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>service=new
  Service(serviceDN);</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>return
  service.getProperty(&quot;erservicename&quot;)[0];</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;/JS&gt;]
  is failed.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>Please
  contact system administrator.</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>To
  show the user ID of the account and the name of the service that hosts this
  account, workflow JavaScript extension should be used. Entity in this context
  is the Account directory object.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>For
  example, the email message will be shown as below.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>Changing
  the password for [johnSmith] on [Linux Service] is failed. Please contact
  system administrator.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&#8220;johnSmith&#8221;
  is the account name and &#8220;Linux Service&#8221; is the name of the service that hosts
  &#8220;johnSmith&#8221; account.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>XHTML Message Body</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;?xml
  version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;!DOCTYPE
  html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;html
  xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot;
  lang=&quot;en&quot;&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;head&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>
  &lt;title&gt;$TITLE&lt;/title&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>
  &lt;meta content=&quot;text/html; charset=UTF-8&quot;
  http-equiv=&quot;Content-Type&quot; /&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;/head&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>
  &lt;body bgcolor=&quot;ffffff&quot;&gt;</span></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>Changing the password for </span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>[&lt;JS&gt;Entity.get().getProperty(&quot;eruid&quot;)[0];&lt;/JS&gt;]
  on </span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>[&lt;JS&gt;</span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>serviceDN=Entity.get().getProperty(&quot;erservice&quot;)[0];</span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>service=new Service(serviceDN);</span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>return service.getProperty(&quot;erservicename&quot;)[0];</span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>&lt;/JS&gt;] is failed.</span></i></b></p>
  <p ><b><i><span style='font-family:"Arial","sans-serif";
  color:black'>Please contact system administrator.</span></i></b></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>
  &lt;/body&gt;</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>&lt;/html&gt;</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>From
  the default template, only modify the contents inside of the body tags.</span></p>
  <p ><span style='font-family:"Arial","sans-serif";color:black'>This
  need to be done to make sure the same email message is sent to the account
  owner.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Use Group Email Topic</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>False</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Unselect the check box
  in order to disable store forwarding of this email message by the ISIM Post
  Office.</span></p>
  </td>
 </tr>
</table>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'><br>
<br>
Set the condition of transition link connected from CHANGEPASSWORD to End node
as below so that the workflow process can be finished without sending the
failure notification if the password is changed successfully. </span></p>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'>&nbsp;</span></p>

<table  border=1 cellspacing=0 cellpadding=0>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Name</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Value</span></b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Condition</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>[Custom]<br>
  <br>
  (activity.resultSummary==activity.SUCCESS)</span></p>
  </td>
 </tr>
</table>

<p ><span style='font-family:"Arial","sans-serif";color:black'>Set
the condition of the transition link connected from CHANGEPASSWORD extension node
to the WorkOrder node as below so that the failure notification can be sent to
the account owner when the CHANGEPASSWORD extension fails.</span></p>

<table  border=1 cellspacing=0 cellpadding=0>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Name</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Value</span></b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Condition</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>[Custom]<br>
  <br>
  (activity.resultSummary!=activity.SUCCESS) </span></p>
  </td>
 </tr>
</table>

<p ><span style='font-family:"Arial","sans-serif";color:black'>Set
the Split Type of CHANGEPASSWORD node to OR and set the Join Type of End node
to OR.</span></p>

<table  border=1 cellspacing=0 cellpadding=0>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Node</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Changed Property</span></b></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  align=center style='margin:0in;margin-bottom:.0001pt;
  text-align:center'><b><span style='font-family:"Arial","sans-serif";
  color:black'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>CHANGEPASSWORD node</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Set the Split Type to OR</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Since only one
  transition condition can be true, the split type should be set to OR.</span></p>
  </td>
 </tr>
 <tr>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>End node</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Set the Join Type to OR</span></p>
  </td>
  <td style='padding:3.75pt 3.75pt 3.75pt 3.75pt'>
  <p  style='margin:0in;margin-bottom:.0001pt'><span
  style='font-family:"Arial","sans-serif";color:black'>Since the split type is
  set to OR, the Join Type must be set to OR.</span></p>
  </td>
 </tr>
</table>

<p ><span style='font-family:"Arial","sans-serif";color:black'>Save
the modified <b>changePassword</b> operation and exit from the workflow
designer applet.</span></p>

<p ><b><span style='font-family:"Arial","sans-serif";color:black'>NOTE:
The account owner should have the valid email address set in the ISIM system.</span></b><span
style='color:black'> </span></p>

<h2><a name=Trigger></a>Trigger the Failed Notification Work Order</h2>

<p  style='margin:0in;margin-bottom:.0001pt'><span
style='font-family:"Arial","sans-serif";color:black'>There are several ways to
trigger the failed notification work order but one of the most forward is to
have a person with an account on a non-ISIM service. Go and remove the account
from the service and then use the Change Passwords link in ISIM to change the
password for the account you just removed. Since the account no longer exists
ISIM will try to change the password, fail, and then send an email. </span></p>

</div>

</div>

</body>

<p ><br>
<a href="../index.html">Back up one level</a> </p>
</html>
